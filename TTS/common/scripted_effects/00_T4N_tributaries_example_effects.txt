monthly_income_special_tributary_type = {

	switch = {
		trigger = $special_tributary_type$

		flag:china_tributary = {
			pay_long_term_gold = { target = prev gold = { value = monthly_character_income multiply = 0.2 }}
			$tribs$ = {
				set_variable = {
					name = prestige_of_tributaries 
					value = 0 
				}
				change_variable = {
					name = prestige_of_tributaries
					value = monthly_prestige
					multiply = 0.05
				}
			}			
		}
		flag:karling_tributary = {
			pay_long_term_gold = { target = prev gold = { value = monthly_character_income multiply = 0.025 }}
		}
	}
}

# Params
# $SUZERAIN$
# 	Character
#	The character to receive tribute
# $TRIBUTARY$
# 	Character
# 	The character to be paying tribute
# $TYPE$
#	TributaryType (name of scripted effect)
#	The type of tributary being created
make_tributary = {
	$TYPE$ = {
		TRIBUTARY = $TRIBUTARY$
		SUZERAIN = $SUZERAIN$
	}
}

# THIS is the tributary
free_tributary = {
	var:my_suzerain = {
		if = {
			limit = {
				is_target_in_variable_list = { name = non_permanent_tributaries target = prev }
			}
			remove_list_variable = { name = non_permanent_tributaries target = prev }				
		}
		else = {
			remove_list_variable = { name = permanent_tributaries target = prev }
		}
		trigger_event = { id = tributaries.4 }
	}
	remove_variable = my_suzerain
}

# Params
# $SUZERAIN$
# 	Character
#	The character to receive tribute
# $TRIBUTARY$
# 	Character
# 	The character to be paying tribute
make_custom_tributary = {
	# Setup suzerain variables
	$SUZERAIN$ = {
		if = {
			limit = {
				NOT = { has_variable = suzerain }
			}
			add_to_global_variable_list = {
				name = T4N_suzerains
				target = this
			}
		}

		add_to_variable_list = {
			name = non_permanent_tributaries
			target = $TRIBUTARY$
		}
	}

	$TRIBUTARY$ = {
		# Store suzerain scope
		set_variable = { name = my_suzerain value = $SUZERAIN$ }

		# Store tributary type
		# Useful for localisation and similar customisation
		set_variable = {
			name = tributary_type
			value = $TYPE$
		}

		# Tribute values
		set_variable = {
			name = tribute_gold_percent
			value = $TRIBUTE_GOLD_PERCENT$
		}
		set_variable = {
			name = monthly_prestige_suzerain
			value = $MONTHLY_PRESTIGE_SUZERAIN$
		}
		set_variable = {
			name = monthly_prestige_tributary
			value = $MONTHLY_PRESTIGE_TRIBUTARY$
		}
		set_variable = {
			name = monthly_piety_suzerain
			value = $MONTHLY_PIETY_SUZERAIN$
		}
		set_variable = {
			name = monthly_piety_tributary
			value = $MONTHLY_PIETY_TRIBUTARY$
		}
	}
}

